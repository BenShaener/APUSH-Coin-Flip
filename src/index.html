<!DOCTYPE html>
<html>
<head>
    <title>TR's Decision Maker - Mr. McKenzie's Historical Randomizer</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="input.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap');

        .vintage-bg {
            background-color: #f4e4bc;
            background-image: radial-gradient(#8b4513 0.5px, transparent 0.5px), radial-gradient(#8b4513 0.5px, #f4e4bc 0.5px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
        }

        .coin {
            perspective: 1000px;
            transform-style: preserve-3d;
        }

        .coin-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 2s;
        }

        .coin.flipping .coin-inner {
            animation: flip 2s linear;
        }

        .coin-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .coin-back {
            transform: rotateY(180deg);
        }

        @keyframes flip {
            0% { transform: rotateY(0); }
            100% { transform: rotateY(720deg); }
        }

        .option-container {
            transition: all 0.3s ease;
        }

        .option-row {
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .vintage-button {
            transition: all 0.3s ease;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        .vintage-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(139, 69, 19, 0.2);
        }

        .result-text {
            animation: fadeInUp 0.5s ease;
        }

        @keyframes fadeInUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body class="vintage-bg min-h-screen">
    <div class="max-w-4xl mx-auto p-8">
        <!-- Header Section -->
        <div class="text-center mb-12">
            <h1 class="text-5xl font-bold mb-4 text-brown-900 font-playfair">TR's Decision Maker</h1>
            <h2 class="text-2xl text-brown-700 mb-6 font-playfair">Mr. McKenzie's Historical Randomizer</h2>
            <div class="text-xl italic text-brown-800 max-w-2xl mx-auto">
                "In any moment of decision, the best thing you can do is the right thing. The next best thing is the wrong thing. The worst thing you can do is nothing."
                <div class="mt-2 text-brown-600">- Theodore Roosevelt</div>
            </div>
        </div>

        <!-- Options Section -->
        <div class="bg-white rounded-lg shadow-xl p-8 mb-12">
            <h3 class="text-2xl mb-6 font-playfair text-brown-900">Set Your Options</h3>
            <div id="optionContainer" class="space-y-4">
                <div class="option-row flex space-x-4">
                    <input type="text" placeholder="Option 1" class="option-input flex-1 p-3 border border-brown-300 rounded-md focus:ring-2 focus:ring-brown-500 focus:border-transparent">
                    <input type="number" placeholder="Probability %" class="prob-input w-32 p-3 border border-brown-300 rounded-md focus:ring-2 focus:ring-brown-500 focus:border-transparent" min="0" max="100">
                </div>
            </div>
            <div class="flex space-x-4 mt-6">
                <button onclick="addOption()" class="vintage-button bg-brown-700 text-white px-6 py-3 rounded-md hover:bg-brown-800">
                    Add Option
                </button>
                <button onclick="removeOption()" class="vintage-button bg-brown-500 text-white px-6 py-3 rounded-md hover:bg-brown-600">
                    Remove Option
                </button>
            </div>
        </div>

        <!-- Coin Section -->
        <div class="text-center mb-12">
            <div class="coin w-64 h-64 mx-auto cursor-pointer" onclick="flip()">
                <div class="coin-inner">
                    <div class="coin-face coin-front bg-gradient-to-br from-yellow-700 to-yellow-900">
                        <svg viewBox="0 0 100 100" class="w-48 h-48">
                            <!-- TR's profile - stylized vector portrait -->
                            <path d="M50,10 Q60,10 70,15 Q80,20 85,30 Q90,40 90,50 Q90,60 85,70 Q80,80 70,85 Q60,90 50,90 Q40,90 30,85 Q20,80 15,70 Q10,60 10,50 Q10,40 15,30 Q20,20 30,15 Q40,10 50,10" fill="#8B4513"/>
                            <path d="M35,40 Q40,35 45,40 L50,45 Q55,40 60,35" fill="none" stroke="#F4E4BC" stroke-width="2"/>
                            <circle cx="43" cy="35" r="3" fill="#F4E4BC"/>
                            <path d="M40,50 Q50,60 60,50" fill="none" stroke="#F4E4BC" stroke-width="2"/>
                            <path d="M35,30 Q45,25 55,30" fill="none" stroke="#F4E4BC" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="coin-face coin-back bg-gradient-to-br from-yellow-800 to-yellow-950">
                        <div class="text-white text-2xl font-bold font-playfair">BULLY!</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Result Section -->
        <div id="result" class="result-text text-3xl font-bold text-center text-brown-900 opacity-0 transition-opacity duration-500"></div>

        <!-- Flip Button -->
        <div class="text-center mt-8">
            <button onclick="flip()" class="vintage-button bg-brown-800 text-white px-8 py-4 rounded-md text-xl hover:bg-brown-900 transform transition">
                BULLY! (Flip the Coin)
            </button>
        </div>
    </div>

    <script>
        function addOption() {
            const container = document.getElementById('optionContainer');
            const newRow = document.createElement('div');
            newRow.className = 'option-row flex space-x-4';
            newRow.innerHTML = `
                <input type="text" placeholder="Option ${container.children.length + 1}" class="option-input flex-1 p-3 border border-brown-300 rounded-md focus:ring-2 focus:ring-brown-500 focus:border-transparent">
                <input type="number" placeholder="Probability %" class="prob-input w-32 p-3 border border-brown-300 rounded-md focus:ring-2 focus:ring-brown-500 focus:border-transparent" min="0" max="100">
            `;
            container.appendChild(newRow);
            
            // Animate new row
            gsap.from(newRow, {
                opacity: 0,
                x: -20,
                duration: 0.3,
                ease: "power2.out"
            });
        }

        function removeOption() {
            const container = document.getElementById('optionContainer');
            if (container.children.length > 1) {
                const lastRow = container.lastChild;
                gsap.to(lastRow, {
                    opacity: 0,
                    x: -20,
                    duration: 0.3,
                    ease: "power2.in",
                    onComplete: () => container.removeChild(lastRow)
                });
            }
        }

        function validateProbabilities() {
            const probInputs = document.querySelectorAll('.prob-input');
            let total = 0;
            probInputs.forEach(input => {
                total += Number(input.value) || 0;
            });
            return Math.abs(total - 100) < 0.01;
        }

        function flip() {
            if (!validateProbabilities()) {
                gsap.to(".options", {
                    x: [-10, 10, -10, 10, 0],
                    duration: 0.5,
                    ease: "power2.inOut"
                });
                alert("Probabilities must sum to 100%!");
                return;
            }

            const coin = document.querySelector('.coin');
            const coinInner = document.querySelector('.coin-inner');
            const result = document.getElementById('result');
            
            // Get options and probabilities
            const options = [];
            const optionRows = document.querySelectorAll('.option-row');
            optionRows.forEach(row => {
                const option = row.querySelector('.option-input').value;
                const prob = Number(row.querySelector('.prob-input').value) || 0;
                if (option && prob > 0) {
                    options.push({ text: option, probability: prob });
                }
            });

            if (options.length < 2) {
                alert("Please add at least two options with probabilities!");
                return;
            }

            // Hide previous result
            gsap.to(result, {
                opacity: 0,
                y: 20,
                duration: 0.3
            });

            // Flip animation
            gsap.to(coinInner, {
                rotationY: "+=720",
                duration: 2,
                ease: "power1.inOut"
            });

            // Generate random result
            const random = Math.random() * 100;
            let cumulative = 0;
            let selectedOption = options[options.length - 1].text;

            for (let option of options) {
                cumulative += option.probability;
                if (random <= cumulative) {
                    selectedOption = option.text;
                    break;
                }
            }

            // Show result after animation
            setTimeout(() => {
                result.textContent = `BULLY! The result is: ${selectedOption}`;
                gsap.to(result, {
                    opacity: 1,
                    y: 0,
                    duration: 0.5,
                    ease: "power2.out"
                });
            }, 2000);
        }

        // Initialize with smooth page load
        gsap.from(".vintage-bg", {
            opacity: 0,
            duration: 1
        });
        
        gsap.from("h1, h2", {
            y: 30,
            opacity: 0,
            duration: 1,
            stagger: 0.2
        });
    </script>
</body>
</html>